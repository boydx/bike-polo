<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Lexington Bike Polo Map, October 2017</title>
  <meta name="description" content="World Hardcourt Bike Polo Tournament Championships">
  <meta name="author" content="Boyd Shearer">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css" />
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.61.0/L.Control.Locate.min.css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  <!--[if lt IE 9]>
  <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.21.0/L.Control.Locate.ie.css' rel='stylesheet' />
<![endif]-->

  <style>
    body {
      padding: 0;
      margin: 0;
    }

    h3 {
      margin-bottom: 5px;
    }

    html,
    body,
    #map {
      height: 100%;
    }

    .quote {
      margin: 10px;
      color: #333;
    }

    #map {
      width: 100%;
      height: 450px;
      margin-bottom: 20px;
    }

    #header {
      width: 100%;
      background-color: #d9e5c3;
      height: 20px;
      font-family: Arial, Helvetica, sans-serif;
      font-size: .8em;
      padding: 5px 0px 0px 8px;
      z-index: 9999;
    }
  </style>

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/ico" href="assets/favicon.ico">

  <!-- Data
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

  <script src="assets/amenities.json"></script>



</head>

<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div id="map"></div>
  <div class="container">
    <div class="row">
      <div class="full column">
        <h1>Topics</h1>
      </div>
    </div>

    <div class="row" style="margin-top:20px;">
      <div class="one-half column">
        <h3>Welcome!</h3>
      </div>
      <div class="one-half column">
        <h4>Other maps</h4>
      </div>
    </div>
    <div class="row">
      <div class="full column">

      </div>
      <div class="row">
        <div class="one-third column">

        </div>
        <div class="one-third column">

        </div>
        <div class="one-third column">

        </div>
      </div>
      <div class="row">
        <div class="full column">
          Credits
        </div>
      </div>

    </div>



    <!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->



    <!-- Linked scripts go down here. Leaflet library should come first!
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

    <script type="text/javascript" src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.61.0/L.Control.Locate.min.js'></script>

    <!-- Make the map here
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

    <script>
      var photo = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
          attribution: "<a href='https://www.arcgis.com/home/item.html?id=10df2279f9684e4a9f6a7f08febac2a9'>ESRI</a>, October, 2017"

        }),
        osm_map = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: "<a href='http://www.openstreetmap.org/copyright'>© OpenStreetMap contributors</a>"

        }),
        toner = L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-hybrid/{z}/{x}/{y}.png", {
          attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'
        });

      var iconLinks = ["assets/bar.svg", "assets/bike.svg", "assets/brew.svg", "assets/food.svg", "assets/arena.png", ]

      // Fit the map area of interest

      var bounds = new L.LatLngBounds(
        new L.LatLng(38.0360, -84.5096), // lower left
        new L.LatLng(38.0440, -84.4977)); // upper right

      var map = L.map('map', options_map).addLayer(osm_map).fitBounds(bounds);

      var options_map = {
        minZoom: 8,
        maxZoom: 20
      };


      var baseMaps = {
        "Photo map": photo,
        "OSM map": osm_map,
        "Toner map": toner

      };




      /* --------------- Layer of workshop locations ---------------  */


      // Build popup and select icon for locations

      for (j = 0; j < locations.features.length; j++) {

        var popupContent = "<h4 style='margin-bottom:-10px;'>" + locations.features[j].properties.name + "</h4><br>" + locations.features[j].properties.desc + "<br>" + locations.features[j].properties.type + ": " + locations.features[j].properties.link;

        var icoURL = "";
        var icoSize = [30, 30];

        if (locations.features[j].properties.type.match(/Food/g)) {
          var icoURL = iconLinks[3]

        } else if (locations.features[j].properties.type.match(/Bike/g)) {
          var icoURL = iconLinks[1]
        } else if (locations.features[j].properties.type.match(/Bar/g)) {
          var icoURL = iconLinks[0]
        } else if (locations.features[j].properties.type.match(/Brew/g)) {
          var icoURL = iconLinks[2]
        } else if (locations.features[j].properties.type.match(/Arena/g)) {
          var icoURL = iconLinks[4],
          icoSize = [100, 100];

        } else {
          var icoURL = "assets/food.svg",
            icoSize = [15, 15]
        };

        // Make marker

        var icon = L.icon({
          iconUrl: icoURL,
          iconSize: icoSize,
          popupAnchor: [0, -22],
          className: 'icon'
        });


        // Place marker and popup

        L.marker([locations.features[j].geometry.coordinates[1], locations.features[j].geometry.coordinates[0]], {
          icon: icon
        }).addTo(map).bindPopup(popupContent);
      };

      L.control.layers(baseMaps).addTo(map);
      L.control.locate().addTo(map);
      L.control.scale().addTo(map);
    </script>
</body>

</html>
